<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="theme-color" content="#1e1e2e">
    <!-- –ó–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –∫–µ—à—É–≤–∞–Ω–Ω—è -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <title>–õ—å–≤—ñ–≤–æ–±–ª–µ–Ω–µ—Ä–≥–æ - –ì—Ä–∞—Ñ—ñ–∫–∏ –≤—ñ–¥–∫–ª—é—á–µ–Ω—å</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <!-- Firebase Config (–æ–∫—Ä–µ–º–∏–π —Ñ–∞–π–ª - –Ω–µ –≤ git!) -->
    <script src="firebase-config.js?v=20251208204855"></script>
    <link rel="stylesheet" href="styles.css?v=20251208204855">
</head>
<body>
    <div class="app">
        <div class="header">
            <h1>‚ö° –õ—å–≤—ñ–≤–æ–±–ª–µ–Ω–µ—Ä–≥–æ</h1>
            <p>–ì—Ä–∞—Ñ—ñ–∫–∏ –ø–æ–≥–æ–¥–∏–Ω–Ω–∏—Ö –≤—ñ–¥–∫–ª—é—á–µ–Ω—å</p>
        </div>
        
        <div class="container">
            <!-- Initial Loading -->
            <div id="initial-loading" class="loading" style="display: block; padding: 40px 0;">
                <div class="spinner"></div>
                <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
            </div>
            
            <!-- Saved Address View (hidden by default) -->
            <div id="saved-view" style="display: none;">
                <div class="saved-address-card">
                    <div class="saved-address-header">
                        <div class="saved-address-info">
                            <h3>üìç –í–∞—à–∞ –∞–¥—Ä–µ—Å–∞</h3>
                            <p id="saved-address-text"></p>
                        </div>
                        <div class="address-buttons">
                            <button class="icon-btn settings-btn" id="notification-settings-btn" title="–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å">üîî</button>
                            <button class="change-btn" id="change-address-btn">‚úèÔ∏è –ó–º—ñ–Ω–∏—Ç–∏</button>
                        </div>
                    </div>
                    <div class="saved-group">
                        <span class="saved-group-label">–ì—Ä—É–ø–∞ –ì–ü–í:</span>
                        <span class="group-badge" id="saved-group-text"></span>
                    </div>
                </div>
                
                <!-- Power Status Section -->
                <div class="power-status-section" id="power-status-section">
                    <div class="power-status-card" id="power-status-card">
                        <div class="power-status-header">
                            <div class="power-status-indicator" id="power-status-indicator">
                                <span class="power-icon" id="power-icon">üí°</span>
                                <span class="power-status-text" id="power-status-text">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</span>
                            </div>
                            <div class="power-timer" id="power-timer">
                                <span class="timer-label" id="timer-label">–î–æ –∑–º—ñ–Ω–∏:</span>
                                <span class="timer-value" id="timer-value">--:--</span>
                            </div>
                        </div>
                        <div class="power-schedule" id="power-schedule">
                            <div class="schedule-info" id="schedule-info"></div>
                            <div class="schedule-update-time" id="schedule-update-time"></div>
                        </div>
                    </div>
                    
                    <!-- Tomorrow's Schedule -->
                    <div class="tomorrow-schedule" id="tomorrow-schedule" style="display: none;">
                        <h3>üìÖ –ì—Ä–∞—Ñ—ñ–∫ –Ω–∞ –∑–∞–≤—Ç—Ä–∞</h3>
                        <div class="tomorrow-info" id="tomorrow-info"></div>
                    </div>
                    
                    <div id="schedule-loading" class="schedule-loading">
                        <div class="spinner"></div>
                        <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –≥—Ä–∞—Ñ—ñ–∫—É...</p>
                    </div>
                    <div id="schedule-error" class="schedule-error" style="display: none;">
                        <p>–ù–µ –≤–¥–∞–ª–æ—Å—è –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≥—Ä–∞—Ñ—ñ–∫</p>
                        <button class="retry-schedule-btn" id="retry-schedule-btn">üîÑ –°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ</button>
                    </div>
                </div>
            </div>
            
            <!-- Address Selection View (hidden by default) -->
            <div id="select-view" style="display: none;">
                <div class="step" id="step-city">
                    <div class="form-group">
                        <label for="city-search">üèôÔ∏è –ù–∞—Å–µ–ª–µ–Ω–∏–π –ø—É–Ω–∫—Ç</label>
                        <div class="search-wrapper">
                            <div class="search-container">
                                <input type="text" id="city-search" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É (–Ω–∞–ø—Ä. –õ—å–≤—ñ–≤)..." autocomplete="off">
                                <button class="clear-btn" id="city-clear">‚úï</button>
                            </div>
                            <div class="dropdown" id="city-dropdown"></div>
                        </div>
                        <div class="selected-value" id="city-selected"></div>
                    </div>
                </div>
                
                <div class="step disabled" id="step-street">
                    <div class="form-group">
                        <label for="street-search">üõ£Ô∏è –í—É–ª–∏—Ü—è</label>
                        <div class="search-wrapper">
                            <div class="search-container">
                                <input type="text" id="street-search" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É –≤—É–ª–∏—Ü—ñ..." autocomplete="off" disabled>
                                <button class="clear-btn" id="street-clear">‚úï</button>
                            </div>
                            <div class="dropdown" id="street-dropdown"></div>
                        </div>
                        <div class="selected-value" id="street-selected"></div>
                    </div>
                </div>
                
                <div class="step disabled" id="step-building">
                    <div class="form-group">
                        <label for="building-search">üè† –ù–æ–º–µ—Ä –±—É–¥–∏–Ω–∫—É</label>
                        <div class="search-wrapper">
                            <div class="search-container">
                                <input type="text" id="building-search" placeholder="–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä..." autocomplete="off" disabled>
                                <button class="clear-btn" id="building-clear">‚úï</button>
                            </div>
                            <div class="dropdown" id="building-dropdown"></div>
                        </div>
                        <div class="selected-value" id="building-selected"></div>
                    </div>
                </div>
                
                <div class="result" id="result" style="display: none;">
                    <div class="result-card">
                        <h3>üìç –û–±—Ä–∞–Ω–∞ –∞–¥—Ä–µ—Å–∞:</h3>
                        <p id="result-address"></p>
                        <div class="group-info">
                            <span class="label">–ì—Ä—É–ø–∞ –ì–ü–í:</span>
                            <span class="value" id="result-group"></span>
                        </div>
                    </div>
                </div>
                
                <div class="loading" id="loading" style="display: none;">
                    <div class="spinner"></div>
                    <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</p>
                </div>
                
                <div class="error" id="error" style="display: none;">
                    <p id="error-message"></p>
                    <button class="retry-btn" onclick="location.reload()">–°–ø—Ä–æ–±—É–≤–∞—Ç–∏ —â–µ</button>
                </div>
            </div>
        </div>
        
        <div class="footer" id="footer-select" style="display: none;">
            <button class="submit-btn" id="submit-btn" disabled>
                ‚úÖ –ó–±–µ—Ä–µ–≥—Ç–∏ –∞–¥—Ä–µ—Å—É
            </button>
        </div>
        
        <!-- Notification Settings Modal -->
        <div class="modal-overlay" id="settings-modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>üîî –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–ø–æ–≤—ñ—â–µ–Ω—å</h2>
                    <button class="modal-close" id="settings-close">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="settings-list">
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">üìã</span>
                                <div class="setting-text">
                                    <span class="setting-title">–ó–º—ñ–Ω–∏ –≥—Ä–∞—Ñ—ñ–∫—É</span>
                                    <span class="setting-desc">–ü–æ–≤—ñ–¥–æ–º–ª—è—Ç–∏ –∫–æ–ª–∏ –≥—Ä–∞—Ñ—ñ–∫ –æ–Ω–æ–≤–∏–≤—Å—è</span>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-schedule-change">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">üîå</span>
                                <div class="setting-text">
                                    <span class="setting-title">–°–≤—ñ—Ç–ª–æ –≤–∏–º–∫–Ω—É–ª–∏</span>
                                    <span class="setting-desc">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∫–æ–ª–∏ –ø–æ—á–∞–ª–æ—Å—å –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è</span>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-power-off">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">üí°</span>
                                <div class="setting-text">
                                    <span class="setting-title">–°–≤—ñ—Ç–ª–æ —É–≤—ñ–º–∫–Ω—É–ª–∏</span>
                                    <span class="setting-desc">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∫–æ–ª–∏ —Å–≤—ñ—Ç–ª–æ –ø–æ–≤–µ—Ä–Ω—É–ª–æ—Å—å</span>
                                </div>
                            </div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="setting-power-on">
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        
                        <div class="setting-item">
                            <div class="setting-info">
                                <span class="setting-icon">‚è∞</span>
                                <div class="setting-text">
                                    <span class="setting-title">–ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è</span>
                                    <span class="setting-desc">–°–ø–æ–≤—ñ—â–µ–Ω–Ω—è –∑–∞ N —Ö–≤–∏–ª–∏–Ω –¥–æ –≤—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è</span>
                                </div>
                            </div>
                            <select id="setting-before-minutes" class="setting-select">
                                <option value="0">–í–∏–º–∫–Ω–µ–Ω–æ</option>
                                <option value="5">5 —Ö–≤</option>
                                <option value="10">10 —Ö–≤</option>
                                <option value="15">15 —Ö–≤</option>
                                <option value="30">30 —Ö–≤</option>
                                <option value="60">60 —Ö–≤</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-footer">
                        <button class="reset-btn" id="reset-data-btn">üóë –°–∫–∏–Ω—É—Ç–∏ –≤—Å—ñ –¥–∞–Ω—ñ</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <script src="app.js?v=20251208204855"></script>
</body>
</html>
